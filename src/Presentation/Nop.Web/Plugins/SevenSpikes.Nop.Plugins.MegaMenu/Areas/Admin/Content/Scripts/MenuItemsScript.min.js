var megaMenu;!function(A){var f={menuFocus:"%1$s. Menu item %2$d of %3$d.",moveDown:"Move down one",moveOutFrom:"Move out from under %s",moveToTop:"Move to the top",moveUnder:"Move under %s",moveUp:"Move up one",oneThemeLocationNoMenus:"",outFrom:"Out from under %s",subMenuFocus:"%1$s. Sub item number %2$d under %3$s.",under:"Under %s"},e="0",t="20",n="30",i="50",s="85",a="150",o="151",r="155",u="156",m="160",l="200",T="5",x="10",D=megaMenu={options:{menuItemDepthPerLevel:30,globalMaxDepth:11,sortableItems:"> *",targetTolerance:0},menuList:void 0,targetList:void 0,menusChanged:!1,isRTL:void 0,negateIfRTL:void 0,isLoaded:!1,init:function(){this.isLoaded=!0,D.menuList=A("#menu-to-edit"),D.targetList=D.menuList,D.isRTL="true"===A(".menu-items-administration").attr("data-isRtl"),D.negateIfRTL=D.isRTL?-1:1,this.jQueryExtensions(),this.attachMenuEditListeners(),this.attachUnsavedChangesListener(),D.menuList.length&&this.initSortables(),this.initAccessibility(),this.initPreviewing(),this.refreshColumnLayouts(),this.refreshRowLayouts(),this.denoteColumns(),this.denoteRows(),this.refreshColumns()},jQueryExtensions:function(){A.fn.extend({getAllColumnLayoutsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+a+"]")},getAllRowLayoutsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+o+"]")},getAllColumnsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+r+"]")},getAllRowsInsideElement:function(){return this.has("span.item-title:first > span[data-itemtype="+u+"]")},isMenuItemOfType:function(e){return 0<this.has("span.item-title:first > span[data-itemtype="+e+"]").length},isColumnsLayout:function(){return this.isMenuItemOfType(a)},isRowsLayout:function(){return this.isMenuItemOfType(o)},isColumn:function(){return this.isMenuItemOfType(r)},isRow:function(){return this.isMenuItemOfType(u)},isPicture:function(){return this.isMenuItemOfType(m)},isCategories:function(){return this.isMenuItemOfType(e)},isManufacturers:function(){return this.isMenuItemOfType(t)},isVendors:function(){return this.isMenuItemOfType(n)},isTopics:function(){return this.isMenuItemOfType(i)},isProductTags:function(){return this.isMenuItemOfType(s)},isCustomLink:function(){return this.isMenuItemOfType(l)},menuItemDepth:function(){var e=D.isRTL?this.eq(0).css("margin-right"):this.eq(0).css("margin-left");return D.pxToDepth(e&&-1!=e.indexOf("px")?e.slice(0,-2):0)},updateDepthClass:function(t,i){return this.each(function(){var e=A(this);i=i||e.menuItemDepth(),A(this).removeClass("menu-item-depth-"+i).addClass("menu-item-depth-"+t)})},shiftDepthClass:function(t){return this.each(function(){var e=A(this).menuItemDepth();A(this).removeClass("menu-item-depth-"+e).addClass("menu-item-depth-"+(e+t))})},childMenuItems:function(){var n=A();return this.each(function(){for(var e=A(this),t=e.menuItemDepth(),i=e.next(".menu-item");i.length&&i.menuItemDepth()>t;)n=n.add(i),i=i.next(".menu-item")}),n},shiftHorizontally:function(n){return this.each(function(){var e=A(this),t=e.menuItemDepth(),i=t+n;e.moveHorizontally(i,t)})},moveHorizontally:function(s,a){return this.each(function(){var e=A(this),t=e.childMenuItems(),n=s-a,i=e.find(".is-submenu");e.updateDepthClass(s,a).updateParentMenuItemDBId(),t&&t.each(function(){var e=A(this),t=e.menuItemDepth(),i=t+n;e.updateDepthClass(i,t).updateParentMenuItemDBId()}),0===s?i.hide():i.show()})},updateParentMenuItemDBId:function(){return this.each(function(){var e=A(this),t=e.find(".menu-item-data-parent-id"),i=parseInt(e.menuItemDepth(),10),n=i-1,n=e.prevAll(".menu-item-depth-"+n).first();0===i?t.val(0):t.val(n.find(".menu-item-data-db-id").val())})},getItemData:function(t,i){t=t||"menu-item";var n,s={},a=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn"];return i||"menu-item"!=t||(i=this.find(".menu-item-data-db-id").val()),i&&this.find("input").each(function(){var e;for(n=a.length;n--;)"menu-item"==t?e=a[n]+"["+i+"]":"add-menu-item"==t&&(e="menu-item["+i+"]["+a[n]+"]"),this.name&&e==this.name&&(s[a[n]]=this.value)}),s}})},countMenuItems:function(e){return A(".menu-item-depth-"+e).length},moveMenuItem:function(e,t){var i,n,s=A("#menu-to-edit li"),a=s.length,o=e.parents("li.menu-item"),r=o.childMenuItems(),u=o.getItemData(),m=parseInt(o.menuItemDepth(),10),l=parseInt(o.index(),10),d=o.next(),c=d.childMenuItems(),h=parseInt(d.menuItemDepth(),10)+1,f=o.prev(),p=parseInt(f.menuItemDepth(),10),v=f.getItemData()["menu-item-db-id"];switch(t){case"up":if(n=l-1,0===l)break;0==n&&0!==m&&o.moveHorizontally(0,m),0!==p&&o.moveHorizontally(p,m),(r?i=o.add(r):o).detach().insertBefore(s.eq(n)).updateParentMenuItemDBId();break;case"down":if(r){if(i=o.add(r),(c=0!==(d=s.eq(i.length+l)).childMenuItems().length)&&(n=parseInt(d.menuItemDepth(),10)+1,o.moveHorizontally(n,m)),a===l+i.length)break;i.detach().insertAfter(s.eq(l+i.length)).updateParentMenuItemDBId()}else{if(0!==c.length&&o.moveHorizontally(h,m),a===l+1)break;o.detach().insertAfter(s.eq(l+1)).updateParentMenuItemDBId()}break;case"top":if(0===l)break;(r?i=o.add(r):o).detach().insertBefore(s.eq(0)).updateParentMenuItemDBId();break;case"left":if(0===m)break;o.shiftHorizontally(-1);break;case"right":if(0===l)break;if(u["menu-item-parent-id"]===v)break;o.shiftHorizontally(1)}e.focus(),D.registerChange(),D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility()},initAccessibility:function(){var e=A("#menu-to-edit");D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility(),e.on("mouseenter.refreshAccessibility focus.refreshAccessibility touchstart.refreshAccessibility",".menu-item",function(){D.refreshAdvancedAccessibilityOfItem(A(this).find("a.item-edit"))}),e.on("click","a.item-edit",function(){D.refreshAdvancedAccessibilityOfItem(A(this))}),e.on("click",".menus-move",function(e){var t=A(this).data("dir");void 0!==t&&D.moveMenuItem(A(this).parents("li.menu-item").find("a.item-edit"),t),e.preventDefault()})},refreshAdvancedAccessibilityOfItem:function(e){var t,i,n,s,a,o,r,u,m,l,d,c,h;!0===A(e).data("needs_accessibility_refresh")&&(u=0===(r=(o=(a=A(e)).closest("li.menu-item").first()).menuItemDepth()),m=a.closest(".menu-item-handle").find(".menu-item-title").text(),l=parseInt(o.index(),10),h=u?r:parseInt(r-1,10),d=o.prevAll(".menu-item-depth-"+h).first().find(".menu-item-title").text(),c=o.prevAll(".menu-item-depth-"+r).first().find(".menu-item-title").text(),e=A("#menu-to-edit li").length,h=o.nextAll(".menu-item-depth-"+r).length,o.find(".field-move").toggle(1<e),0!==l&&(t=o.find(".menus-move-up")).attr("aria-label",f.moveUp).css("display","inline"),0!==l&&u&&(t=o.find(".menus-move-top")).attr("aria-label",f.moveToTop).css("display","inline"),l+1!==e&&0!==l&&(t=o.find(".menus-move-down")).attr("aria-label",f.moveDown).css("display","inline"),0===l&&0!==h&&(t=o.find(".menus-move-down")).attr("aria-label",f.moveDown).css("display","inline"),u||(t=o.find(".menus-move-left"),i=f.outFrom.replace("%s",d),t.attr("aria-label",f.moveOutFrom.replace("%s",d)).text(i).css("display","inline")),0!==l&&o.find(".menu-item-data-parent-id").val()!==o.prev().find(".menu-item-data-db-id").val()&&(t=o.find(".menus-move-right"),i=f.under.replace("%s",c),t.attr("aria-label",f.moveUnder.replace("%s",c)).text(i).css("display","inline")),s=u?(n=(u=A(".menu-item-depth-0")).index(o)+1,e=u.length,f.menuFocus.replace("%1$s",m).replace("%2$d",n).replace("%3$d",e)):(r=(s=o.prevAll(".menu-item-depth-"+parseInt(r-1,10)).first()).find(".menu-item-data-db-id").val(),s=s.find(".menu-item-title").text(),r=A('.menu-item .menu-item-data-parent-id[value="'+r+'"]'),n=A(r.parents(".menu-item").get().reverse()).index(o)+1,f.subMenuFocus.replace("%1$s",m).replace("%2$d",n).replace("%3$s",s)),a.attr("aria-label",s).text(s),a.data("needs_accessibility_refresh",!1))},refreshAdvancedAccessibility:function(){A(".menu-item-settings .field-move a").hide(),A("a.item-edit").data("needs_accessibility_refresh",!0),A(".menu-item-edit-active a.item-edit").each(function(){D.refreshAdvancedAccessibilityOfItem(this)})},refreshKeyboardAccessibility:function(){A("a.item-edit").off("focus").on("focus",function(){A(this).off("keydown").on("keydown",function(e){var t,i=A(this),n=i.parents("li.menu-item").getItemData();if((37==e.which||38==e.which||39==e.which||40==e.which)&&(i.off("keydown"),1!==A("#menu-to-edit li").length)){switch(t={38:"up",40:"down",37:"left",39:"right"},A("body").hasClass("rtl")&&(t={38:"up",40:"down",39:"left",37:"right"}),t[e.which]){case"up":D.moveMenuItem(i,"up");break;case"down":D.moveMenuItem(i,"down");break;case"left":D.moveMenuItem(i,"left");break;case"right":D.moveMenuItem(i,"right")}return A("#edit-"+n["menu-item-db-id"]).focus(),!1}})})},initPreviewing:function(){A("#menu-to-edit").on("change input setTitle",".edit-menu-item-title:not(.localized)",function(e){var t=A(e.currentTarget),i=t.closest(".menu-item"),e=i.find(".menu-item-title"),t=t.val();t?e.text(t).removeClass("no-title"):(t=A("#mega-menu-info").attr("data-noLabel"),e.text(t).addClass("no-title")),i.isColumnsLayout()?(D.refreshColumnLayouts(),D.refreshColumns()):i.isRowsLayout()?D.refreshRowLayouts():i.isColumn()&&D.refreshColumns()})},initSortables:function(){function a(e,t){d="";var i,n,s,a,o,r,u=e.item,m=e.placeholder.prevAll(".menu-item-depth-"+(t-1)).first(),l=e.placeholder.prevAll(".menu-item-depth-"+(t-2)).first();return m.is(u)&&(m=u.prevAll(".menu-item-depth-"+(t-1)).first()),(l.is(u)||l.is(m))&&(l=u.prevAll(".menu-item-depth-"+(t-2)).first()),!!function(e,t){if(e.isPicture()){var e=t.menuItemDepth();return(e=!(t.isCustomLink()&&0===e))&&(d=A("#mega-menu-info").attr("data-invalidNesting-picture-asMovingItem")),e}return!!t.isPicture()&&(d=A("#mega-menu-info").attr("data-invalidNesting-picture-asParentItem"),!0)}(u,m)||(i=m,n=l,!((e=u).isColumn()?((s=!(i.isColumnsLayout()||i.isRow()&&n.isRowsLayout()))&&(d=A("#mega-menu-info").attr("data-invalidNesting-column-asMovingItem")),!s):!i.isColumn()||((s=n.isColumnsLayout()&&!e.isRow()||e.isColumnsLayout()||e.isRowsLayout())&&(d=A("#mega-menu-info").attr("data-invalidNesting-column-asParentItem")),!s))||(e=m,s=l,!((l=u).isRow()?((o=!(e.isRowsLayout()||e.isColumn()&&s.isColumnsLayout()))&&(d=A("#mega-menu-info").attr("data-invalidNesting-row-asMovingItem")),!o):!e.isRow()||((o=s.isRowsLayout()&&!l.isColumn()||l.isColumnsLayout()||l.isRowsLayout())&&(d=A("#mega-menu-info").attr("data-invalidNesting-row-asParentItem")),!o))||(l=m,!((o=u).isColumnsLayout()?((a=0<l.length)&&(d=A("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asMovingItem")),!a):!l.isColumnsLayout()||((a=!o.isColumn())&&(d=A("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asParentItem")),!a))||(o=m,!((a=u).isRowsLayout()?((r=0<o.length)&&(d=A("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asMovingItem")),!r):!o.isRowsLayout()||((r=!a.isRow())&&(d=A("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asParentItem")),!r))||!!function(e,t,i){if(e.isCategories()||e.isManufacturers()||e.isVendors()||e.isTopics()||e.isProductTags()){if(t.isColumn())return!1;if(0===i)return!1;var n=e.find(".item-type").attr("data-itemtype"),i=e.find(".edit-menu-item-entityId").val(),s=e.find(".edit-menu-item-template").val();if("0"===i&&(e.isCategories()||e.isTopics()||e.isProductTags())||-1!==y.indexOf(n)&&-1!==g.indexOf(s))return d=A("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}if(t.isCategories()||t.isManufacturers()||t.isVendors()||t.isTopics()||t.isProductTags()){e=t.find(".item-type").attr("data-itemtype"),n=t.find(".edit-menu-item-entityId").val(),s=t.find(".edit-menu-item-template").val();if("0"===n&&(t.isCategories()||t.isTopics()||t.isProductTags())||-1!==y.indexOf(e)&&-1!==g.indexOf(s))return d=A("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}return!1}(u,m,t)))))}var d,o,r,u,i,m,l,c,h,f,p,v=!0,g=[T,x],y=[e,t,n],I=0,C=D.menuList.offset().left,b=A("body"),L=function(){if(!b[0].className)return 0;var e=b[0].className.match(/menu-max-depth-(\d+)/);return e&&e[1]?parseInt(e[1],10):0}();function w(e){i=e.placeholder.prev(".menu-item"),m=e.placeholder.next(".menu-item"),i[0]==e.item[0]&&(i=i.prev(".menu-item")),m[0]==e.item[0]&&(m=m.next(".menu-item")),l=i.length?i.offset().top+i.height():0,c=m.length?m.offset().top+m.height()/3:0,r=m.length?m.menuItemDepth():0,u=i.length?(e=i.menuItemDepth()+1)>D.options.globalMaxDepth?D.options.globalMaxDepth:e:0}function M(e,t){e.placeholder.updateDepthClass(t,I),I=t}0!==A("#menu-to-edit li").length&&A(".drag-instructions").show(),C+=D.isRTL?D.menuList.width():0,D.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",items:D.options.sortableItems,start:function(e,t){var i,n;D.isRTL&&(t.item[0].style.right="auto"),f=t.item.children(".menu-item-transport"),o=t.item.menuItemDepth(),M(t,o),n=(t.item.next()[0]==t.placeholder[0]?t.item.next():t.item).childMenuItems(),f.append(n),i=f.outerHeight(),i+=0<i?+t.placeholder.css("margin-top").slice(0,-2):0,i+=t.helper.outerHeight(),h=i,i-=2,t.placeholder.height(i),p=o,n.each(function(){var e=A(this).menuItemDepth();p=p<e?e:p}),n=t.helper.find(".menu-item-handle").outerWidth(),n+=D.depthToPx(p-o),n-=2,t.placeholder.width(n),(n=t.placeholder.next(".menu-item")).css("margin-top",h+"px"),t.placeholder.detach(),A(this).sortable("refresh"),t.item.after(t.placeholder),n.css("margin-top",0),w(t)},stop:function(e,t){var i,n=I-o,s=f.children();if(s.insertAfter(t.item),!v)return d=d||A("#mega-menu-info").attr("data-invalidNesting-invalidOperation"),A(".invalid-nesting").text(d),A(".invalid-nesting").show(),setTimeout(function(){A(".invalid-nesting").fadeOut()},4e3),A(this).sortable("cancel"),void s.insertAfter(t.item);i=t.item.find(".item-title .is-submenu"),0<I?i.show():i.hide(),0!=n&&(t.item.updateDepthClass(I),s.shiftDepthClass(n),function(e){var t,i=L;if(0!==e){if(0<e)L<(t=p+e)&&(i=t);else if(e<0&&p==L)for(;!A(".menu-item-depth-"+i,D.menuList).length&&0<i;)i--;b.removeClass("menu-max-depth-"+L).addClass("menu-max-depth-"+i),L=i}}(n)),D.registerChange(),t.item.updateParentMenuItemDBId(),t.item[0].style.top=0,D.isRTL&&(t.item[0].style.left="auto",t.item[0].style.right=0),D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility(),t.item.isColumn()?D.denoteColumns():t.item.isRow()&&D.denoteRows()},change:function(e,t){t.placeholder.parent().hasClass("menu")||(i.length?i.after(t.placeholder):D.menuList.prepend(t.placeholder)),w(t)},sort:function(e,t){var i=t.helper.offset(),n=D.isRTL?i.left+t.helper.width():i.left,s=D.negateIfRTL*D.pxToDepth(n-C);u<s||i.top<l-D.options.targetTolerance?s=u:s<r&&(s=r),t.placeholder.css("border-color",""),v=!0,a(n=t,s=s)?(n.placeholder.css("border-color","#c00"),v=!1):n.placeholder.css("border-color",""),M(n,s),v&&c&&i.top+h>c&&(m.after(t.placeholder),w(t),A(this).sortable("refreshPositions"))}})},attachMenuEditListeners:function(){var t=this;A("#update-nav-menu").bind("click",function(e){if(e.target&&e.target.className)return-1!=e.target.className.indexOf("item-edit")?t.eventOnClickEditLink(e.target):-1!=e.target.className.indexOf("item-delete")?t.eventOnClickMenuItemDelete(e.target):void 0}),A('#add-custom-links input[type="text"]').keypress(function(e){A("#customlinkdiv").removeClass("form-invalid"),13===e.keyCode&&(e.preventDefault(),A("#submit-customlinkdiv").click())})},addItemToMenu:function(t,e,i,n){i=i||function(){},n=n||function(){};var s=A(".menu-items-administration").attr("data-addMenuItemUrl"),a=e;addAntiForgeryToken(a),A.ajax({cache:!1,type:"POST",url:s,data:a}).done(function(e){var t=A("#menu-instructions");e=A.trim(e),i(e,a),A("li.pending").hide().fadeIn("slow"),A(".drag-instructions").show(),!t.hasClass("menu-instructions-inactive")&&t.siblings().length&&t.addClass("menu-instructions-inactive"),D.registerChange(),n()}).fail(function(e){t.append('<div class="error-message">'+e+"</div>")})},addMenuItemToBottom:function(e){A(e).appendTo(D.targetList),D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility();e=A(e).attr("data-menuItemId"),e=A("#menu-item-"+e);e.isColumnsLayout()?D.refreshColumnLayouts():e.isRowsLayout()&&D.refreshRowLayouts()},addMenuItemToTop:function(e){A(e).prependTo(D.targetList),D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility();e=A(e).attr("data-menuItemId"),e=A("#menu-item-"+e);e.isColumnsLayout()?D.refreshColumnLayouts():e.isRowsLayout()&&D.refreshRowLayouts()},addMenuItemToElement:function(e,t){var i=t.ParentMenuItemId,t=A("#menu-item-"+i);0<t.length&&(0<(i=t.childMenuItems()).length?A(e).insertAfter(i.last()):A(e).insertAfter(t),D.refreshKeyboardAccessibility(),D.refreshAdvancedAccessibility(),e=A(e).attr("data-menuItemId"),(e=A("#menu-item-"+e)).isColumn()?(D.denoteColumns(),D.refreshColumns()):e.isRow()&&D.denoteRows())},attachUnsavedChangesListener:function(){A("#menu-to-edit input, #menu-to-edit select").change(function(){D.registerChange()}),0!==A("#menu-to-edit").length?window.onbeforeunload=function(){if(D.menusChanged)return"The changes you made will be lost if you navigate away from this page."}:A("#menu-settings-column").find("input,select").end().find("a").attr("href","#").unbind("click")},registerChange:function(){D.menusChanged=!0},eventOnClickEditLink:function(e){var t,i,n=/#(.*)$/.exec(e.href);if(n&&n[1]&&0!==(i=(t=A("#"+n[1])).parent()).length)return i.hasClass("menu-item-edit-inactive")?(t.data("menu-item-data")||t.data("menu-item-data",t.getItemData()),t.slideDown("fast"),i.removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active"),A(e).removeClass("arrow-down"),A(e).addClass("arrow-up")):(t.slideUp("fast"),i.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive"),A(e).removeClass("arrow-up"),A(e).addClass("arrow-down")),!1},eventOnClickMenuItemDelete:function(e){var t=parseInt(e.id.replace("menu-item-delete-",""),10),i=A("#menu-item-"+t),n=i.childMenuItems();return(i.isColumnsLayout()||i.isRowsLayout()||i.isColumn()||i.isRow())&&0<n.length?(e=A("#mega-menu-info").attr("data-confirmationWindow-button-removeAllItems"),t=A("#mega-menu-info").attr("data-confirmationWindow-button-cancel"),A("#dialog-confirm").dialog({resizable:!1,draggable:!1,height:"auto",width:400,modal:!0,buttons:[{text:e,icons:{primary:"ui-icon-closethick"},click:function(){D.removeMenuItem(i),n.each(function(){D.removeMenuItem(A(this))}),A(this).dialog("close")}},{text:t,icons:{primary:"ui-icon-cancel"},click:function(){A(this).dialog("close")}}]})):D.removeMenuItem(i),!1},removeMenuItem:function(e){var t=e.childMenuItems();e.addClass("deleting").animate({opacity:0,height:0},350,function(){e.remove(),t.shiftDepthClass(-1).updateParentMenuItemDBId(),0===A("#menu-to-edit li").length&&(A(".drag-instructions").hide(),A("#menu-instructions").removeClass("menu-instructions-inactive")),D.refreshAdvancedAccessibility(),e.isColumnsLayout()?(D.refreshColumnLayouts(),D.refreshColumns()):e.isRowsLayout()?D.refreshRowLayouts():e.isColumn()?(D.denoteColumns(),D.refreshColumns()):e.isRow()&&D.denoteRows(),D.registerChange()})},depthToPx:function(e){return e*D.options.menuItemDepthPerLevel},pxToDepth:function(e){return Math.floor(e/D.options.menuItemDepthPerLevel)},refreshColumnLayouts:function(){var e=D.menuList.find("li").getAllColumnLayoutsInsideElement();D.refreshLayouts(".has-column-layouts",".no-column-layouts",e)},refreshRowLayouts:function(){var e=D.menuList.find("li").getAllRowLayoutsInsideElement();D.refreshLayouts(".has-row-layouts",".no-row-layouts",e)},refreshLayouts:function(i,e,t){0<t.length?(A(i).show(),A(e).hide(),A(i+" select").empty(),t.each(function(){var e=A(this).attr("data-menuitemid")||0,t=A(this).find(".menu-item-title").text()||A("#mega-menu-info").attr("data-noLabel");A(i+" select").append('<option value="'+e+'">'+t+"</option>")})):(A(i).hide(),A(e).show())},refreshColumns:function(){var e=".has-columns",t=".no-columns",n=[];if(D.menuList.find("li").getAllColumnLayoutsInsideElement().each(function(){var t,e=A(this),i=e.childMenuItems().getAllColumnsInsideElement();0<i.length&&(t={title:e.find(".menu-item-title").text(),children:[]},i.each(function(){var e=A(this);t.children.push({id:e.attr("data-menuitemid")||0,title:e.find(".menu-item-title").text()+" "+e.find(".item-type").text()})}),n.push(t))}),0<n.length){A(e).show(),A(t).hide(),A(e+" select").empty();for(var i=0;i<n.length;i++){var s=n[i],a=s.children,o=A("<optgroup>");o.attr("label",s.title);for(var r=0;r<a.length;r++){var u=a[r],m=A("<option></option>");m.val(u.id),m.text(u.title),o.append(m)}A(e+" select").append(o)}}else A(e).hide(),A(t).show()},denoteColumns:function(){D.menuList.find("li").getAllColumnLayoutsInsideElement().each(function(){A(this).childMenuItems().getAllColumnsInsideElement().each(function(e){var t=A(this).find(".edit-menu-item-title:not(.localized)");0===t.val().length&&t.trigger("setTitle"),A(this).find(".item-type .position").text("["+ ++e+"]")})})},denoteRows:function(){D.menuList.find("li").getAllRowLayoutsInsideElement().each(function(){A(this).childMenuItems().getAllRowsInsideElement().each(function(e){A(this).find(".edit-menu-item-title:not(.localized)").trigger("setTitle"),A(this).find(".item-type .position").text("["+ ++e+"]")})})}};A(document).ready(function(){var e=A('a[data-toggle="pill"][data-tab-name="tab-menu-items"]');"true"===e.attr("aria-selected")||e.hasClass("active")?megaMenu.init():e.one("shown.bs.tab",function(){megaMenu.init()}),A(".save-settings-button").on("click",function(){D.menusChanged=!1})})}(jQuery);