var ribbonType="",editRibbonPictureButtonElement="",pageRibbonTableSelector=".cards-group.page-ribbon";function setRibbonType(t){$(t).parents(".page-ribbon-settings").each(function(t,i){i=$(i).attr("data-ribbontype");null!=i&&""!=i&&(ribbonType=i)})}function removeRibbonPictureFromDom(t){var i=getNoPlictureLableText();""!=i&&(i="<label>"+i+"</label>",$(t).html(i))}function removePictureId(){"category"==ribbonType&&null!=$("#CategoryPageRibbon_PictureId")&&$("#CategoryPageRibbon_PictureId").attr("value",0),"product"==ribbonType&&null!=$("#ProductPageRibbon_PictureId")&&$("#ProductPageRibbon_PictureId").attr("value",0)}function addAndDisplayRibbonPicturesGrid(){var t,i=$(".ribbonPicturesWindow").data("kendoWindow");null==i?$.ajax({url:$(".get-ribbon-picture-grid").attr("data-getGridUrl"),type:"GET"}).done(function(t){ribbonPictureGridHtml='<div class="ribbonPicturesWindow" style="opacity:0;"><div id="ribbon-pictures-grid">'+t+"</div></div>",$("body").prepend(ribbonPictureGridHtml),$(".ribbonPicturesWindow").kendoWindow({width:650,modal:!0,animation:!1}),(i=$(".ribbonPicturesWindow").data("kendoWindow")).center();t=$(".ribbonPicturesWindow");t.css("opacity","100"),t.closest(".k-window").css("top","70px"),i.open(),$(document).on("click","#select-ribbon-images-grid tbody tr",function(t){var i=$(this).find("img").attr("alt");i&&addPictureIdToTheMarkup(i,$(this).find("img").attr("src"))})}):(i.center(),(t=$(".ribbonPicturesWindow")).css("opacity","100"),t.closest(".k-window").css("top","70px"),i.open())}function addPictureIdToTheMarkup(t,i){"category"==ribbonType&&null!=$("#CategoryPageRibbon_PictureId")&&setPictureId("#CategoryPageRibbon_PictureId",t,i),"product"==ribbonType&&null!=$("#ProductPageRibbon_PictureId")&&setPictureId("#ProductPageRibbon_PictureId",t,i)}function setPictureId(t,i,e){$(t).attr("value",i),$(".ribbonPicturesWindow").data("kendoWindow").close(),addPictureToDom(e,i),showDeleteRibbonPictureButton()}function showDeleteRibbonPictureButton(){var t=$(editRibbonPictureButtonElement).closest(".cards-group.page-ribbon").find(".remove-ribbon-picture");null!=t&&$(t).css("display","inline-block")}function addPictureToDom(t,i){var e=$(editRibbonPictureButtonElement);null==e||null!=(e=e.closest(".card-body").find(".ribbon-image"))&&(i="<img src="+t+" alt="+i+" />",e.html(i))}function getRibbonPictureId(t){t=$(t).attr("data-ribbonPictureId");return null!=t&&""!=t&&parseInt(t)||0}function getSetRibbonPictureUrl(){var t=$("#ribbon-data").attr("data-setRibbonPictureUrl");return null==t?"":t}function getNoPlictureLableText(){var t=$("#ribbon-data").attr("data-noPictureLabelText");return null==t?"":t}function getAddDeleteProductRibbonPictureUrl(t){t=$(t).attr("data-addDeleteProductRibbonPictureUrl");return null==t?"":t}function getEditPictureUrl(t){t=$(t).attr("data-editPictureUrl");return null==t||""==t?"":t}$(document).ready(function(){$(pageRibbonTableSelector).each(function(){var t=$(this).find(".ribbon-image label");null!=t&&0<t.length&&$(this).find(".remove-ribbon-picture").css("display","none")}),$("div.ribbon-picture-buttons .edit-ribbon-picture").click(function(){""!=getEditPictureUrl(this)&&(editRibbonPictureButtonElement=this,$(editRibbonPictureButtonElement).parents(".page-ribbon-settings").each(function(t,i){i=$(i).attr("data-ribbontype");null!=i&&""!=i&&(ribbonType=i)}),addAndDisplayRibbonPicturesGrid())}),$("div.ribbon-picture-buttons .remove-ribbon-picture").on("click",function(){var t=$(this).closest(".card-body").find("div.ribbon-image");null!=t&&null!=$(t).find("img")&&(setRibbonType(this),removePictureId(),removeRibbonPictureFromDom(t),$(this).css("display","none"))}),$(".manage-ribbon-pictures").click(function(){window.location.href=getAddDeleteProductRibbonPictureUrl(this)})});