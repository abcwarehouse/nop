!function (t, n, u) { var i, p = "ribbon-wrapper", g = "#product-ribbon-info"; function s(t, r, o) { var e; if (r.productElement) { if (o) { if (!(e = u.getAttrValFromDom(g, "data-productPageBugPictureContainerSelector"))) return } else if (!(e = u.getAttrValFromDom(g, "data-productBoxPictureContainerSelector"))) return; var a = r.productElement.find(e); if (a.parent().hasClass(p)) return; if (a && r.productId && 0 < r.productId) { var d, c = r.productId; (d = o ? n(t).filter("div[data-productId='" + c + "']") : n(t).filter("a[data-productId='" + c + "']")) && 0 < d.length && (a.wrap('<div class="' + p + '"></div>'), a.after(d)) } } } t.showRibbons = function () { var t = 0, r = [], o = function () { var e = ".product-ribbon", t = u.getAttrValFromDom(g, "data-productPagePicturesParentContainerSelector"), a = [], r = {}, o = u.getAttrValFromDom(g, "data-productId"); if (o && 0 < o && t) { var d = n(t).find(e); d && 0 !== d.length || (r.productId = o, r.productElement = n(t)) } return n(i).each(function () { var t = n(this).find(e); if (!t || 0 === t.length) { var r = n(this).attr("data-productid"); if (r && 0 < r) { var o = { productId: r, productElement: n(this) }; a.push(o) } } }), { productPage: r, categoryPageProducts: a } }(); if (o && o.productPage && o.productPage.productId && (t = o.productPage.productId), o && o.categoryPageProducts && 0 < o.categoryPageProducts.length) for (var e = 0; e < o.categoryPageProducts.length; e++) { var a = o.categoryPageProducts[e]; a.hasOwnProperty("productId") && r.push(a.productId) } if (t || 0 !== r.length) { n.isNumeric(t) || (t = 0); var d = { productPageId: t, categoryPageIds: r }, c = u.getAttrValFromDom("#product-ribbon-info", "data-retrieveproductribbonsurl"); n.ajax({ cache: !1, type: "POST", data: n.toJSON(d), contentType: "application/json; charset=utf-8", url: c }).done(function (t) { t && (function (t, r) { if (r && r.productPage && r.productPage.productId && s(t, r.productPage, !0), r && r.categoryPageProducts && 0 < r.categoryPageProducts.length) for (var o = 0; o < r.categoryPageProducts.length; o++) { s(t, r.categoryPageProducts[o]) } }(t, o), n.event.trigger({ type: "nopProductRibbonsLoadingCompleteEvent" })) }) } }, n(document).ready(function () { (i = u.getAttrValFromDom(g, "data-productBoxSelector")) && t.showRibbons() }), n(document).on("nopAjaxFiltersFiltrationCompleteEvent newProductsAddedToPageEvent", nopProductRibbons.showRibbons) }(window.nopProductRibbons = window.nopProductRibbons || {}, jQuery, sevenSpikesCore);