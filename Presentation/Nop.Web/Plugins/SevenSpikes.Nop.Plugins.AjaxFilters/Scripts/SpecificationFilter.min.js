!function(x,e,i){var t,F=[];function S(){return t=t||new e}function v(e,i,t,a){if(t===a)return a;var n=r(e,i,t);return(n-=i)+i<a&&(n=a),g(n)}function m(e,i,t,a){if(t===a)return a;var n=r(e,i,t);return a<n+i&&(n=a),n}function r(e,i,t){for(var a=e;t<a&&t<=a-i;)a-=i;return g(a)}function M(e,i,t){for(var a=e;a<t&&a+i<=t;)a+=i;return g(a)}function I(e){var n=[];return e.each(function(e,i){var t=x(i).text(),a=parseFloat(t);b(t,a)&&n.push(a)}),n}function g(e){return parseFloat(e.toFixed(2))}function b(e,i){return!isNaN(i)&&isFinite(e)}function n(e,i){var t=V(e,i),a=t.slider.prev(".specification-min-max-panel");a.length&&(a.find(".specification-min-value").text(t.sliderMinValue),a.find(".specification-max-value").text(t.sliderMaxValue));var n=t.slider.next(".specification-current-value-panel");n.length&&(n.find(".current-min-value").text(t.sliderMinValue),n.find(".current-max-value").text(t.sliderMaxValue));var r=t.slider.attr("data-specification-slider-id");F.push(r)}function l(e,i){var t=V(e,i),a=t.slider.next(".specification-current-value-panel");a.length&&(a.find(".current-min-value").text(t.minValueSelected),a.find(".current-max-value").text(t.maxValueSelected))}function s(e,i){var n=V(e,i),t=n.slider.parents(".has-specification-slider"),a=t.find(".checkbox-item label");a.siblings("input").prop("checked",!1);var r,l,s,o,c=!1,d=!1,u=!1;if(a.each(function(e,i){var t=x(i).text(),a=parseFloat(t);b(t,a)&&n.minValueSelected<=a&&a<=n.maxValueSelected&&(n.sliderMinValue===a&&(c=!0),n.sliderMaxValue===a&&(d=!0),x(i).siblings("input").prop("checked",!0),u=!0)}),c&&d&&a.siblings("input").prop("checked",!1),!u)return x(o="#"+(s="nopAjaxFiltersSpecificationFilterNoProductsDialog")).length||(r=x(".nopAjaxFilters7Spikes").attr("data-no-products-window-title"),l=x(".nopAjaxFilters7Spikes").attr("data-no-products-window-message"),x("<div/>",{id:s,title:r}).html(l).appendTo("body")),void S().showNoProductsModalDialog(o);var p,f,h,v=n.slider.attr("data-specification-slider-id"),m=F.indexOf(v);-1!==m&&F.splice(m,1),f=x(p=t).attr("data-optionsGroupId"),h=f&&0<f.length?x(p):x(p).find("div[data-optionsGroupId]"),S().requestProductsForSelectedFilters(h)}function V(e,i){var t,a,n,r=x(e.target),l=r.slider("option","step"),s=r.slider("option","min"),o=r.slider("option","max"),c={slider:r,sliderStep:l,sliderMinValue:s,sliderMaxValue:o};return i&&i.values&&((t=parseFloat(i.values[0]))+l<s&&(t=s),o<(a=parseFloat(i.values[1]))+l&&(a=o),n=S().adjustMinMaxValuesIfInRTL(s,o,t,a),c.minValueSelected=n.minValue,c.maxValueSelected=n.maxValue),c}i.initializeSlider=function(e){var i,t,a=I(x(e).find(".checkbox-item label"));a.length<2?x(e).parents(".filter-block").remove():(i=Math.min.apply(Math,a),t=Math.max.apply(Math,a),x(e).find(".specification-attribute-slider").slider({min:i,max:t,range:!0,values:[i,t],create:n,slide:l,stop:s}))},i.reInitializeSlider=function(e){var i,t,a,n,r,l,s,o,c,d,u,p,f,h=I(e.find(".checkbox-item:has(input:checkbox:checked) label"));0!==h.length&&(t=(i=e.find(".specification-attribute-slider")).attr("data-specification-slider-id"),-1===F.indexOf(t)||(a=S(),n=Math.min.apply(Math,h),r=Math.max.apply(Math,h),a.isRtl&&(r=[n,n=r][0]),l=i.slider("option","step"),s=i.slider("option","min"),o=i.slider("option","max"),c=s,a.isRtl&&(o=[s,s=c=o][0]),d=a.adjustMinMaxValuesIfInRTL(s,o,n,r),p=a.isRtl?(u=v(c,l,d.maxValue,o),m(c,l,d.minValue,s)):(u=function(e,i,t,a){if(t===a)return a;var n=M(e,i,t);n+i<a&&(n=a);return n}(c,l,d.minValue,s),function(e,i,t,a){if(t===a)return a;var n=M(e,i,t);(n+=i)+i>a&&(n=a);return g(n)}(c,l,d.maxValue,o)),i.slider("option","values",[u,p]),a.isRtl&&(u=v(c,l,r,o),p=m(c,l,n,s)),(f=e.find(".specification-current-value-panel")).find(".current-min-value").html(u),f.find(".current-max-value").html(p)))}}(jQuery,FiltersManager,window.specificationSliderManager=window.specificationSliderManager||{}),function(s,o,c){o.prototype.buildSpecificationFiltersModel=function(e,i,t,n){var r=new Object;return r.CategoryId=e,r.ManufacturerId=i,r.VendorId=t,r.SpecificationFilterGroups=new Array,s(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var e=s(this),i=parseInt(e.attr("data-optionsGroupId"))||0,a=new Object;a.Id=i,null!=n&&n.is(e)&&(a.IsMain=!0,r.Priority=1),a.FilterItems=new Array,e.find("[data-option-ids]").each(function(){var e=s(this),i=e.attr("data-option-ids"),t=new Object;t.Id=i,t.FilterItemState=o.getFilterItemStateBasedOnAttributes(e),a.FilterItems.push(t)}),r.SpecificationFilterGroups.push(a)}),r},o.prototype.refreshSpecificationFilters=function(t,l){s(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var a,n,e=s(this),i=parseInt(e.attr("data-optionsGroupId"))||0,r=s.grep(t.SpecificationFilterGroups,function(e){return e.Id===i});0!==r.length&&(a="usecheckboxes"===l||e.hasClass("has-specification-slider"),n=!a,e.find("[data-option-ids]").each(function(){var e=s(this),i=parseInt(e.attr("data-option-ids"))||0,t=s.grep(r[0].FilterItems,function(e){return e.Id===i});0!==t.length&&o.addStateClassAndAttributesToOption(e,t[0].FilterItemState,!a)&&(n=!1)}),n&&e.find('[value="0"]').attr("selected","selected"),e.hasClass("has-specification-slider")&&c.reInitializeSlider(e))})},s(document).ready(function(){s(".specificationFilterPanel7Spikes .has-specification-slider").each(function(e,i){c.initializeSlider(i)}),s(".specificationFilterPanel7Spikes").not(".has-specification-slider").find('.attribute-options-select, .checkbox-list input[type="checkbox"]').on("change",function(){var e=s(this),i=e.closest("div[data-optionsGroupId]");(new o).requestProductsForSelectedFilters(i,e)})})}(jQuery,FiltersManager,specificationSliderManager);